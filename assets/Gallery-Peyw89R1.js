import{_ as z,r as y,h as G,a as b,i as $,w as l,d as e,e as o,b as r,c as N,g as V,n as B,k as F,F as J,l as q,m as K,t as E,o as H,p as Q,j as A,V as O,q as P}from"./index-DFbfcveG.js";const W={key:0},X={key:1,class:"image-uploaded potion-absolute w-100 border-sm rounded-lg d-flex"},Y={class:"trash-div position-absolute text-end w-100 h-100"},Z={__name:"AddImgDialog",props:{openModal:{type:Boolean},imageSrc:{type:String}},emits:["close","upload","remove","save","update:openModal"],setup(m,{emit:_}){const d=y(),g=m,i=_,k=G({get:()=>g.openModal,set:u=>i("update:openModal",u)}),S=()=>{i("close")},x=u=>{i("upload",u)},c=()=>{i("remove")},p=()=>{i("save")},v=()=>{var u;(u=d.value)==null||u.click()};return(u,n)=>{const w=o("v-col"),h=o("v-card"),L=o("VRow"),U=o("v-file-input"),t=o("v-icon"),a=o("v-img"),s=o("v-row"),I=o("v-btn"),M=o("v-dialog");return b(),$(M,{modelValue:k.value,"onUpdate:modelValue":n[0]||(n[0]=f=>k.value=f),"max-width":"500"},{default:l(()=>[e(h,{class:"pa-5"},{default:l(()=>[e(L,null,{default:l(()=>[e(w,{cols:10},{default:l(()=>n[1]||(n[1]=[r("span",{class:"text-h6 font-weight-bold"},"Image",-1)])),_:1}),e(w,{cols:2},{default:l(()=>[e(h,{style:{width:"25px",height:"25px"},class:"d-flex align-center justify-center float-right",onClick:S},{default:l(()=>n[2]||(n[2]=[r("span",{class:"text-h6"},"x",-1)])),_:1})]),_:1})]),_:1}),e(s,{class:"mt-5"},{default:l(()=>[e(w,{cols:12,class:"d-flex justify-center align-center"},{default:l(()=>[r("div",{class:B(["file-container position-relative cursor-pointer text-center",{"w-100":u.$vuetify.display.smAndDown,"w-50":u.$vuetify.display.mdAndUp}])},[m.imageSrc?(b(),N("div",X,[r("div",Y,[r("span",{class:"trash text-red text-center position-absolute",onClick:c},[e(t,null,{default:l(()=>n[5]||(n[5]=[V("mdi-close-circle")])),_:1})])]),e(a,{src:m.imageSrc,class:"rounded-lg"},null,8,["src"])])):(b(),N("div",W,[r("form",{class:"position-absolute cursor-pointer w-100 h-100 rounded-lg border-md border-dashed",onClick:v},[e(U,{class:"m-0 p-0 w-100 h-100 cursor-pointer opacity-0 hidden",ref_key:"inputRef",ref:d,"onUpdate:modelValue":x},null,512),r("div",null,[r("section",null,[e(t,null,{default:l(()=>n[3]||(n[3]=[V("mdi-cloud-upload")])),_:1}),n[4]||(n[4]=r("p",{class:"mt-0"},"Upload image.",-1))])])])]))],2)]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(w,{cols:12},{default:l(()=>[e(I,{class:B(["text-white float-right bg-cyan-darken-1",{"cursor-not-allowed":!m.imageSrc}]),onClick:p,disabled:!m.imageSrc},{default:l(()=>n[6]||(n[6]=[V("Save")])),_:1},8,["class","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},ee=z(Z,[["__scopeId","data-v-f1ca3a74"]]),le="/user-gallery/assets/noimg-CKaSSxF1.png",te={class:"d-flex align-center justify-center w-100"},oe={class:"w-100"},ae={class:"pa-3 w-100 border-none elevation-0"},ne={__name:"ImagesComponent",props:{images:{type:Array},checkLiked:{type:Function},from:{type:String},tab:{type:{String}}},emits:["like-click","edit"],setup(m,{emit:_}){const d=m,g=y(),i=y(!1),k=_,S=p=>{k("like-click",p)},x=p=>{k("edit",p)},c=p=>{i.value=!0,g.value=p.img};return(p,v)=>{const u=o("v-col"),n=o("v-row"),w=o("Tramsition"),h=o("v-img"),L=o("v-btn"),U=o("v-overlay"),t=o("v-card"),a=o("v-hover"),s=o("v-icon"),I=o("v-chip"),M=o("v-dialog");return b(),N(J,null,[d.images.length===0?(b(),$(n,{key:0},{default:l(()=>[e(u,{cols:12,class:"d-flex justify-center"},{default:l(()=>v[1]||(v[1]=[r("img",{src:le},null,-1)])),_:1})]),_:1})):F("",!0),e(n,null,{default:l(()=>[(b(!0),N(J,null,q(d.images,(f,R)=>(b(),$(u,{cols:12,sm:"6",md:"4",lg:"3",xl:"2"},{default:l(()=>[e(w),e(t,{class:"d-flex align-center justify-center rounded-lg pa-5 pb-0 w-100 ma-1"},{default:l(()=>[r("div",te,[r("div",oe,[e(a,null,{default:l(({isHovering:C,props:j})=>[e(t,K({class:"w-100 bg-grey-lighten-4",style:{height:"160px"},ref_for:!0},j),{default:l(()=>[e(h,{src:f.img,class:"h-100 w-100",cover:""},null,8,["src"]),e(U,{"model-value":C,class:"align-center justify-center",scrim:"#036358",contained:""},{default:l(()=>[e(L,{variant:"flat",onClick:D=>c(f)},{default:l(()=>v[2]||(v[2]=[V("Preview ")])),_:2},1032,["onClick"])]),_:2},1032,["model-value"])]),_:2},1040)]),_:2},1024),r("div",ae,[e(n,null,{default:l(()=>[e(u,{cols:12,sm:"8",md:"8",lg:"8",xl:"8"},{default:l(()=>[e(s,{class:B([{like:m.checkLiked(f)},"cursor-pointer mr-3"]),onClick:C=>S(f)},{default:l(()=>[V(E(m.checkLiked(f)?"mdi-heart":"mdi-heart-outline"),1)]),_:2},1032,["class","onClick"]),r("span",null,E(f.likes)+" Likes",1)]),_:2},1024),e(u,{cols:12,sm:"4",md:"4",lg:"4",xl:"4"},{default:l(()=>[m.from?(b(),$(I,{key:0,color:"cyan",size:"small",class:"float-right cursor-pointer",onClick:C=>x(f)},{default:l(()=>[e(s,{icon:"mdi-pencil",start:""}),v[3]||(v[3]=V("Edit "))]),_:2},1032,["onClick"])):F("",!0)]),_:2},1024)]),_:2},1024)])])])]),_:2},1024),e(M,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=C=>i.value=C),"max-width":"500"},{default:l(()=>[e(t,{height:"300",width:"500"},{default:l(()=>[e(h,{src:g.value,class:"h-100 w-100"},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024))),256))]),_:1})],64)}}},T=z(ne,[["__scopeId","data-v-ed14a232"]]),ie={__name:"Gallery",setup(m){const _=y(!1),d=y(),g=y([]),i=y("All"),k=y([]),S=y(null);let x=JSON.parse(localStorage.getItem("userLoggedin")),c=y(JSON.parse(localStorage.getItem("galleryData")));H(()=>{var t;((t=c.value)==null?void 0:t.length)>0&&(U(),g.value=c.value)}),Q(c,()=>{k.value=[],U()},{deep:!0});const p=(t=null)=>{t?(_.value=!0,d.value=t.img,S.value=t.id):(_.value=!0,d.value="")},v=t=>{var a=t;const s=new FileReader;s.onload=I=>{d.value=I.target.result},s.readAsDataURL(a)},u=()=>{d.value=""},n=()=>{if(k.value=[],d.value!=="")if(S.value){const t=c.value.findIndex(a=>a.id===S.value);console.log(d.value,c.value[t].img),d.value!==c.value[t].img&&(c.value[t].liked_by=[],c.value[t].likes=0),c.value[t].img=d.value,localStorage.setItem("galleryData",JSON.stringify(c.value)),c=_.value=!1}else{let t={id:Math.ceil(Math.random()*1e6),likes:0,img:d.value,liked_by:[],userId:x.id};g.value.push(t),localStorage.setItem("galleryData",JSON.stringify(g.value)),_.value=!1,i.value=i.value}},w=t=>{let a=x.id;const s=t.liked_by.indexOf(a);s===-1?(t.likes++,t.liked_by.push(a)):(t.likes--,t.liked_by.splice(s,1)),localStorage.setItem("galleryData",JSON.stringify(g.value))},h=t=>{let a=x.id;return t.liked_by.find(s=>s===a)},L=()=>{_.value=!1},U=()=>{var a;let t=x.id;(a=c.value)==null||a.forEach(s=>{s.userId===t&&k.value.push(s)})};return(t,a)=>{const s=o("v-btn"),I=o("v-divider"),M=o("v-tab"),f=o("v-tabs"),R=o("v-tabs-window-item"),C=o("v-tabs-window"),j=o("v-card");return b(),$(j,{class:"pa-5"},{default:l(()=>[e(A(P),null,{default:l(()=>[e(A(O),{cols:8},{default:l(()=>a[3]||(a[3]=[r("span",{class:"text-h6 font-weight-bold"},"Gallery",-1)])),_:1}),e(A(O),{cols:4},{default:l(()=>[e(s,{class:"text-white float-right bg-cyan-darken-1",onClick:p},{default:l(()=>a[4]||(a[4]=[V("Add new")])),_:1})]),_:1})]),_:1}),e(I,{class:"mt-2"}),e(A(P),null,{default:l(()=>[e(A(O),{cols:12},{default:l(()=>[e(f,{color:"cyan-darken-1","bg-color":"transparent",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=D=>i.value=D)},{default:l(()=>[e(M,{text:"All images",value:"All"}),e(M,{text:"My images",value:"My"})]),_:1},8,["modelValue"]),e(C,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=D=>i.value=D),class:"mt-3"},{default:l(()=>[e(R,{value:"All"},{default:l(()=>[e(T,{images:g.value,"check-liked":h,onLikeClick:w},null,8,["images"])]),_:1}),e(R,{value:"My"},{default:l(()=>[e(T,{images:k.value,"check-liked":h,onLikeClick:w,from:"My",tab:i.value,onEdit:p},null,8,["images","tab"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ee,{openModal:_.value,"onUpdate:openModal":a[2]||(a[2]=D=>_.value=D),imageSrc:d.value,onClose:L,onUpload:v,onRemove:u,onSave:n},null,8,["openModal","imageSrc"])]),_:1})}}};export{ie as default};
